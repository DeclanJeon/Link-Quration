// src/types/extraction-types.ts í™•ì¥
import { BaseExtractionResult } from './extraction';
import { MediaAnalysisResult, MediaDetectionResult } from './media-analysis';

export interface VideoExtractionResult extends BaseExtractionResult {
  mediaType: 'video';
  mediaMetadata: {
    duration: number;
    viewCount: number;
    chapters: Array<{
      timestamp: string;
      title: string;
      description: string;
      startTime: number;
      endTime: number;
    }>;
    thumbnails: string[];
    tags: string[];
    category: string;
    transcript: string;
    hasTranscript: boolean;
  };
  aiAnalysis?: any;
  aiAnalysisError?: string;
  videoAnalysisError?: string;
}

export interface WebExtractionResult extends BaseExtractionResult {
  mediaType: 'text' | 'audio' | 'image';
  scrapingError?: string;
  mercuryError?: string;
  videoAnalysisError?: string;
}

// ğŸ†• í™•ì¥ëœ ë¯¸ë””ì–´ ì¶”ì¶œ ê²°ê³¼
export interface EnhancedMediaExtractionResult extends BaseExtractionResult {
  isMediaContent: boolean;
  mediaDetection?: MediaDetectionResult;
  mediaAnalysis?: MediaAnalysisResult;

  // ê¸°ì¡´ í•„ë“œë“¤
  hasVideo?: boolean;
  hasAudio?: boolean;
  mediaDuration?: number;

  // ìƒˆë¡œìš´ ë¯¸ë””ì–´ ê´€ë ¨ í•„ë“œë“¤
  platform?: string;
  mediaId?: string;
  embedUrl?: string;
  thumbnailUrl?: string;
  channelName?: string;
  channelUrl?: string;
  uploadDate?: string;
  viewCount?: number;
  likeCount?: number;
  subtitles?: Array<{
    language: string;
    languageCode: string;
    isAutoGenerated: boolean;
    url?: string;
  }>;

  // ë¶„ì„ ë©”íƒ€ë°ì´í„°
  // ë¶„ì„ ë©”íƒ€ë°ì´í„°
  analysisMethod?: 'basic' | 'detailed' | 'comprehensive';
  analysisTimestamp?: string;
  analysisConfidence?: number;
  extractionErrors?: string[];

  // íƒ€ì„ë¼ì¸ ê´€ë ¨
  hasTimeline?: boolean;
  timelineSegments?: number;

  // í’ˆì§ˆ ì •ë³´
  quality?: {
    resolution?: string;
    bitrate?: number;
    fps?: number;
    audioQuality?: string;
    codec?: string;
  };
}

// ğŸ†• ë¯¸ë””ì–´ ì¶”ì¶œ ì˜µì…˜
export interface MediaExtractionOptions {
  includeTranscript?: boolean;
  includeChapters?: boolean;
  includeThumbnails?: boolean;
  includeMetadata?: boolean;
  preferredLanguage?: string;
  maxDuration?: number; // seconds
  analysisDepth?: 'basic' | 'detailed' | 'comprehensive';
}

// ğŸ†• í†µí•© ì¶”ì¶œ ê²°ê³¼ íƒ€ì…
export type UnifiedExtractionResult =
  | VideoExtractionResult
  | WebExtractionResult
  | EnhancedMediaExtractionResult;
